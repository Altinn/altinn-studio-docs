<!DOCTYPE html>
<html lang="nb" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.49.2" />
    <meta name="description" content="Kodearkitektur for React og tilhørende teknologi">


    
    <title>Kodearkitektur :: Altinn Studio</title>
    
    <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
    <link href="/css/nucleus.css" rel="stylesheet">
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <link href="/css/hybrid.css" rel="stylesheet">
    <link href="/css/featherlight.min.css" rel="stylesheet">
    <link href="/css/horsey.css" rel="stylesheet">
    
    <link href="/css/theme.css" rel="stylesheet">
    
    
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <script src="/js/jquery-2.x.min.js"></script>
    <style>
      :root #header + #content > #left > #rlblock_left {
        display:none !important;
      }
    </style>

    

    
<link href="/css/altinn.css" rel="stylesheet">


<script async src="https://www.googletagmanager.com/gtag/js?id=UA-114303148-1"></script>
<script>
var host = window.location.hostname;
if(host != "localhost")
{
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-114303148-1', { 'anonymize_ip': true });
}
</script>


  </head>
  <body class="" data-url="/technology/react/codearchitecture/">
    <nav id="sidebar" class="">





<div class="highlightable">
  <div id="header-wrapper">
    <div id="header">
       
	<div style="text-align: center; margin: 1em 0;">
<a href="/"><img src="/images/altinn-studio-white.png" style="display:inline;height:1.2em;margin:0;"><span style="color:white font-size: 1.2em;"> docs</span></a>
</div>
 


    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input data-search-input id="search-by" type="text" placeholder="Søk...">
    <span data-search-clear=""><i class="fa fa-close"></i></span>
</div>
<script src="/js/lunr.min.js"></script>
<script src="/js/horsey.js"></script>
<script>
    var baseurl = "https:\/\/docs.altinn.studio";
</script>
<script src="/js/search.js"></script>

    
  </div>

  
    <ul class="topics">
        
        
        
          
          


 
  
    
    <li data-nav-id="/guide/" class="dd-item 
        
        
        parent
        ">
      <a href="/guide/">
        <span>Kom i gang</span>

        
        

          
            <i class="fa fa-angle-down fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/guide/first-time-setup/" class="dd-item 
        
        
        
        ">
      <a href="/guide/first-time-setup/">
        <span>Første gangs oppsett</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/guide/service-creation/" class="dd-item 
        
        
        
        ">
      <a href="/guide/service-creation/">
        <span>Lag en utgave</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/guide/service-testing/" class="dd-item 
        
        
        
        ">
      <a href="/guide/service-testing/">
        <span>Test utgave</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/documentation/" class="dd-item 
        
        
        parent
        ">
      <a href="/documentation/">
        <span>Solution</span>

        
        

          
            <i class="fa fa-angle-down fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/documentation/runtime/" class="dd-item 
        
        
        parent
        ">
      <a href="/documentation/runtime/">
        <span>Runtime</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/documentation/designer/" class="dd-item 
        
        
        
        ">
      <a href="/documentation/designer/">
        <span>Altinn Studio</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/documentation/designer/uidesigner/" class="dd-item 
        
        
        
        ">
      <a href="/documentation/designer/uidesigner/">
        <span>UI - designer</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/documentation/designer/datamodeling/" class="dd-item 
        
        
        
        ">
      <a href="/documentation/designer/datamodeling/">
        <span>Data modeling</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/documentation/designer/workflow/" class="dd-item 
        
        
        
        ">
      <a href="/documentation/designer/workflow/">
        <span>Workflow</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/documentation/designer/logic/" class="dd-item 
        
        
        
        ">
      <a href="/documentation/designer/logic/">
        <span>Logic &amp; Rules</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/documentation/designer/apiuse/" class="dd-item 
        
        
        
        ">
      <a href="/documentation/designer/apiuse/">
        <span>Using API&#39;s</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/documentation/designer/apiexpose/" class="dd-item 
        
        
        
        ">
      <a href="/documentation/designer/apiexpose/">
        <span>Exposing API</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/documentation/designer/reusablecomponent/" class="dd-item 
        
        
        
        ">
      <a href="/documentation/designer/reusablecomponent/">
        <span>Reusable Resources</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/documentation/designer/text/" class="dd-item 
        
        
        
        ">
      <a href="/documentation/designer/text/">
        <span>Texts and translations</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/documentation/designer/deployment/" class="dd-item 
        
        
        
        ">
      <a href="/documentation/designer/deployment/">
        <span>Service Deployment</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/documentation/designer/test/" class="dd-item 
        
        
        
        ">
      <a href="/documentation/designer/test/">
        <span>Service Test</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/documentation/repositories/" class="dd-item 
        
        
        
        ">
      <a href="/documentation/repositories/">
        <span>Repositories</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/documentation/repositories/architecture/" class="dd-item 
        
        
        
        ">
      <a href="/documentation/repositories/architecture/">
        <span>Arkitektur</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/documentation/repositories/data/" class="dd-item 
        
        
        
        ">
      <a href="/documentation/repositories/data/">
        <span>Data</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/documentation/repositories/data/service-configurations/" class="dd-item 
        
        
        
        ">
      <a href="/documentation/repositories/data/service-configurations/">
        <span>ServiceConfigurations.json</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/documentation/repositories/data/rule-handler/" class="dd-item 
        
        
        
        ">
      <a href="/documentation/repositories/data/rule-handler/">
        <span>RuleHandler.js</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/documentation/repositories/data/calculationhandler/" class="dd-item 
        
        
        
        ">
      <a href="/documentation/repositories/data/calculationhandler/">
        <span>CalculationHandler.cs</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/documentation/repositories/data/form-layout/" class="dd-item 
        
        
        
        ">
      <a href="/documentation/repositories/data/form-layout/">
        <span>FormLayout.json</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/documentation/repositories/data/instantiationhandler/" class="dd-item 
        
        
        
        ">
      <a href="/documentation/repositories/data/instantiationhandler/">
        <span>InstansiationHandler.cs</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/documentation/repositories/data/serviceimplementation/" class="dd-item 
        
        
        
        ">
      <a href="/documentation/repositories/data/serviceimplementation/">
        <span>ServiceImplementation.cs</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/documentation/repositories/data/servicemetadata/" class="dd-item 
        
        
        
        ">
      <a href="/documentation/repositories/data/servicemetadata/">
        <span>ServiceMetadata.json</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/documentation/repositories/data/servicemodel/" class="dd-item 
        
        
        
        ">
      <a href="/documentation/repositories/data/servicemodel/">
        <span>ServiceModel.cs</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/documentation/repositories/data/servicemodelxsd/" class="dd-item 
        
        
        
        ">
      <a href="/documentation/repositories/data/servicemodelxsd/">
        <span>ServiceModel.xsd</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/documentation/repositories/data/validationhandler/" class="dd-item 
        
        
        
        ">
      <a href="/documentation/repositories/data/validationhandler/">
        <span>ValidationHandler.cs</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/documentation/repositories/data/reactapp/" class="dd-item 
        
        
        
        ">
      <a href="/documentation/repositories/data/reactapp/">
        <span>react-app.js</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/documentation/repositories/functional/" class="dd-item 
        
        
        
        ">
      <a href="/documentation/repositories/functional/">
        <span>Funksjonelt</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/about/" class="dd-item 
        
        
        parent
        ">
      <a href="/about/">
        <span>About</span>

        
        

          
            <i class="fa fa-angle-down fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/about/goals/" class="dd-item 
        
        
        
        ">
      <a href="/about/goals/">
        <span>Goals</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/about/slide/" class="dd-item
     
      ">
        <a href="/about/slide/">
        <span>Slide NO</span> 
        
        </a></li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/architecture/" class="dd-item 
        
        
        parent
        ">
      <a href="/architecture/">
        <span>Architecture</span>

        
        

          
            <i class="fa fa-angle-down fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/architecture/application/" class="dd-item 
        
        
        
        ">
      <a href="/architecture/application/">
        <span>Application</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/architecture/application/altinn-studio/" class="dd-item 
        
        
        
        ">
      <a href="/architecture/application/altinn-studio/">
        <span>Altinn Studio</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/architecture/application/altinn-studio/react-app/" class="dd-item 
        
        
        
        ">
      <a href="/architecture/application/altinn-studio/react-app/">
        <span>React App</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/architecture/application/altinn-studio-apps/" class="dd-item 
        
        
        
        ">
      <a href="/architecture/application/altinn-studio-apps/">
        <span>Altinn Studio Apps</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/architecture/application/altinn-studio-apps/react-app/" class="dd-item 
        
        
        
        ">
      <a href="/architecture/application/altinn-studio-apps/react-app/">
        <span>React App</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/architecture/build/" class="dd-item 
        
        
        
        ">
      <a href="/architecture/build/">
        <span>Build process</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/architecture/deployment/" class="dd-item 
        
        
        
        ">
      <a href="/architecture/deployment/">
        <span>Deployment</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/architecture/deployment/altinn-studio/" class="dd-item 
        
        
        
        ">
      <a href="/architecture/deployment/altinn-studio/">
        <span>Altinn Studio</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/architecture/deployment/altinn-studio-apps/" class="dd-item 
        
        
        
        ">
      <a href="/architecture/deployment/altinn-studio-apps/">
        <span>Altinn Studio Apps</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/architecture/deployment/service-deployment/" class="dd-item 
        
        
        
        ">
      <a href="/architecture/deployment/service-deployment/">
        <span>Service Deployment</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/architecture/solution/" class="dd-item 
        
        
        parent
        ">
      <a href="/architecture/solution/">
        <span>Solution</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/technology/" class="dd-item 
        parent
        
        
        ">
      <a href="/technology/">
        <span>Technology</span>

        
        

          
            <i class="fa fa-angle-down fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/technology/docker/" class="dd-item 
        
        
        
        ">
      <a href="/technology/docker/">
        <span>Docker</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/technology/kubernetes/" class="dd-item 
        
        
        
        ">
      <a href="/technology/kubernetes/">
        <span>Kubernetes</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/technology/react/" class="dd-item 
        parent
        
        
        ">
      <a href="/technology/react/">
        <span>React</span>

        
        

          
            <i class="fa fa-angle-down fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/technology/react/codearchitecture/" class="dd-item 
        parent
        active
        
        ">
      <a href="/technology/react/codearchitecture/">
        <span>Kodearkitektur</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/technology/redux/" class="dd-item 
        
        
        
        ">
      <a href="/technology/redux/">
        <span>Redux</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/technology/traefik/" class="dd-item 
        
        
        
        ">
      <a href="/technology/traefik/">
        <span>Traefik</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/technology/thirdpartycomponents/" class="dd-item 
        
        
        
        ">
      <a href="/technology/thirdpartycomponents/">
        <span>Tredjeparts komponenter</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/technology/typescript/" class="dd-item 
        
        
        
        ">
      <a href="/technology/typescript/">
        <span>TypeScript</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/technology/nginx/" class="dd-item 
        
        
        
        ">
      <a href="/technology/nginx/">
        <span>nginx</span>

        
        

        
      </a>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
        

        
        
            
                <li>
                    <h3>Lenker</h3>
                    <a href="https://altinn.studio"><i class='fa fa-fw fa-desktop'></i> Altinn Studio</a>
                    
                </li>
            
                <li>
                    
                    <a href="https://github.com/Altinn/altinn-studio/issues"><i class='fa fa-fw fa-bug'></i> Backlog / issues</a>
                    
                </li>
            
                <li>
                    
                    <a href="https://github.com/Altinn/altinn-studio/milestones?direction=asc&amp;sort=due_date&amp;state=open"><i class='fa fa-fw fa-map-signs'></i> Milestones</a>
                    
                </li>
            
                <li>
                    
                    <a href="https://github.com/altinn/altinn-studio"><i class='fa fa-fw fa-github'></i> GitHub</a>
                    
                </li>
            
           
        
        

        
    </ul>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
        
          <div id="top-bar">
            
              
              
              
            <div id="top-github-link">
              <a class="github-link" href="https://github.com/altinn/altinn-studio-docs/blob/master/content/technology/react/codearchitecture/_index.md" target="blank">
                <i class="fa fa-code-fork"></i>
                Endre
              </a>
            </div>
              
            

            <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                <span id="sidebar-toggle-span">
                  <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                    <i class="fa fa-bars"></i>
                  </a>
                </span>
                
                  <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
                
                <span class="links">
                  
                  










 <a href='/'>Altinn Studio docs</a> > <a href='/technology/'>Technology</a> > <a href='/technology/react/'>React</a> > Kodearkitektur

 

 

 


                </span>
            </div>
            
              <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li><a href="#bruk-av-redux-store-i-containere-og-components">Bruk av Redux Store i Containere og Components.</a>
<ul>
<li><a href="#kort-oppsummert-tl-dr">Kort oppsummert (TL;DR)</a></li>
<li><a href="#utfordring-why">Utfordring (Why?)</a></li>
<li><a href="#re-rendring-trigges-av">Re-rendring trigges av…</a>
<ul>
<li><a href="#kilder">Kilder</a></li>
</ul></li>
</ul></li>
<li><a href="#filtrering-av-redux-store-i-mapstatetoprops-ved-help-av-selector">Filtrering av Redux Store i mapStateToProps() ved help av Selector</a>
<ul>
<li><a href="#kort-oppsummert-tl-dr-1">Kort oppsummert (TL;DR)</a></li>
<li><a href="#utfordring-why-1">Utfordring (Why?)</a></li>
<li><a href="#løsningen">Løsningen</a>
<ul>
<li><a href="#kilder-1">Kilder</a></li>
</ul></li>
<li><a href="#eksempel">Eksempel</a>
<ul>
<li><a href="#selector">Selector</a></li>
<li><a href="#implementasjon-i-mapstatetoprops">Implementasjon i mapStateToProps</a></li>
</ul></li>
</ul></li>
<li><a href="#higher-order-components">Higher-Order Components</a>
<ul>
<li><a href="#hvorfor">Hvorfor?</a>
<ul>
<li><a href="#eksempel-på-bruk-i-altinn-studio">Eksempel på bruk i Altinn Studio</a></li>
<li><a href="#eksempel-på-higher-order-component">Eksempel på Higher Order Component</a></li>
<li><a href="#kilder-2">Kilder</a></li>
</ul></li>
</ul></li>
<li><a href="#normalized-redux-store">Normalized Redux Store</a>
<ul>
<li><a href="#kort-oppsummert-tl-dr-2">Kort oppsummert (TL;DR)</a></li>
<li><a href="#utfordring-why-2">Utfordring (Why?)</a></li>
<li><a href="#eksempel-1">Eksempel</a>
<ul>
<li><a href="#kilder-3">Kilder</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
</div>
    
            
          </div>
        
        
          <div id="tags">
            
              <a class="label label-default" href="https://docs.altinn.studiotags/tjenester-3.0">tjenester 3.0</a>
            
              <a class="label label-default" href="https://docs.altinn.studiotags/react">React</a>
            
              <a class="label label-default" href="https://docs.altinn.studiotags/redux">Redux</a>
            
              <a class="label label-default" href="https://docs.altinn.studiotags/reselect">Reselect</a>
            
              <a class="label label-default" href="https://docs.altinn.studiotags/selector">Selector</a>
            
          </div>
        
        <div id="body-inner">
          
            
              <h1>Kodearkitektur</h1>
            
          






<h1 id="bruk-av-redux-store-i-containere-og-components">Bruk av Redux Store i Containere og Components.</h1>

<h2 id="kort-oppsummert-tl-dr">Kort oppsummert (TL;DR)</h2>

<p>Send &ldquo;ID&rdquo; eller andre identifikatorer via Props til komponenten og la komponenten hente data fra Redux Store.</p>

<h2 id="utfordring-why">Utfordring (Why?)</h2>

<p>Hvis en del av Redux Store sendes som Props så vil komponenten re-rendres ved endringer av denne Prop/Store. Det er ønskelig at komponenter ikke rendrer unødvendig.</p>

<h2 id="re-rendring-trigges-av">Re-rendring trigges av…</h2>

<ul>
<li>Endring av Props.</li>
<li>Endring av State som endrer Props.</li>
</ul>

<h3 id="kilder">Kilder</h3>

<ul>
<li><a href="https://medium.com/lexical-labs-engineering/redux-best-practices-64d59775802e">Redux best practices</a></li>
<li><a href="https://itnext.io/redux-ruins-you-react-app-performance-you-are-doing-something-wrong-82e28ec96cf5">Common pitfalls</a></li>
</ul>

<h1 id="filtrering-av-redux-store-i-mapstatetoprops-ved-help-av-selector">Filtrering av Redux Store i mapStateToProps() ved help av Selector</h1>

<h2 id="kort-oppsummert-tl-dr-1">Kort oppsummert (TL;DR)</h2>

<p>Bruk Memoized Selector for å filtrere Redux Store til Props når Redux Store er stor.</p>

<h2 id="utfordring-why-1">Utfordring (Why?)</h2>

<p>Hver gang (en del av) Redux Store endrer seg vil funksjoner som filtrerer ut deler av Redux Store kjøres. Hvis Redux Store (state tree) er stor (mange endringer) eller funksjonen er krevende kan det føre til ytelsesproblemer.</p>

<h2 id="løsningen">Løsningen</h2>

<p>En Selector funksjon, med bruk av &ldquo;reduxjs/reselect&rdquo; vil kun kjøres når en definert del av Redux Store endres (eks &ldquo;state.del.underdel&rdquo;).</p>

<h3 id="kilder-1">Kilder</h3>

<ul>
<li><a href="https://github.com/reduxjs/reselect">Reselect</a></li>
<li><a href="https://blog.rangle.io/react-and-redux-performance-with-reselect/">Comparing shouldComponentUpdate() and Reselect</a></li>
</ul>

<h2 id="eksempel">Eksempel</h2>

<h3 id="selector">Selector</h3>

<p>Dette er en enkel Selector uten mye logikk og filtrering. Jo større logikk i &ldquo;filtreringen&rdquo; jo mer &ldquo;sparer&rdquo; man i ytelse.</p>

<pre><code class="language-javascript">
import { createSelector } from 'reselect';

/**
 * Reselect version
 */
const formDataSelector = (state: any, providedProps: any) =&gt; {
  console.log('formdata selector', providedProps.id);
  return state.formFiller.formData;
};

const dataModelBindingSelector = (state: any, providedProps: any) =&gt; {
  console.log('datamodelBindingSelector');
  return state.formDesigner.layout.components[providedProps.id].dataModelBinding;
};

const getFormData = () =&gt; {
  console.log('getFormData() is trigggered, selector is created');
  return createSelector(
    [formDataSelector, dataModelBindingSelector],
    (formData: any, dataModelBinding: any) =&gt; {
      console.log('ouput selector running', formData);
      if (!formData) return '';
      if (!formData[dataModelBinding]) return '';
      return formData[dataModelBinding];
    },
  );
};

export const makeGetFormDataSelector = getFormData;

// Alternativt en enda enklere variant, som er implementert p.t.

import { createSelector } from 'reselect';

const formDataSelector = (state: any, providedProps: any) =&gt; {
  return state.formFiller.formData[state.formDesigner.layout.components[providedProps.id].dataModelBinding];
};

const getFormData = () =&gt; {
  return createSelector(
    [formDataSelector],
    (formData: any) =&gt; {
      if (!formData) return '';
      return formData;
    },
  );
};

export const makeGetFormDataSelector = getFormData;


</code></pre>

<h3 id="implementasjon-i-mapstatetoprops">Implementasjon i mapStateToProps</h3>

<pre><code class="language-javascript">const makeMapStateToProps = () =&gt; {
  const GetFormDataSelector = makeGetFormDataSelector();
  const mapStateToProps = (state: IAppState, props: IProvidedProps): IFormElementProps =&gt; ({
    id: props.id,
    formData: GetFormDataSelector(state, props),
  });
  return mapStateToProps;
};

export const FormComponentWrapper = connect(makeMapStateToProps)(FormComponent);
</code></pre>

<p>makeMapStateToProps implementeres slik at Selectoren kan gjenbrukes på tvers av flere komponenter.</p>

<h1 id="higher-order-components">Higher-Order Components</h1>

<p>Higher-Order component er en funksjon som tar imot en component og returnerer et nytt komponent med ekstra funksjoner, eller ekstra data.
Et eksempel på dette er <em>connect</em>-funksjonen fra &ldquo;redux&rdquo;, som tar imot en funksjon som velger redux-state data, og en komponent som disse dataene skal sendes til.</p>

<h2 id="hvorfor">Hvorfor?</h2>

<p>Ved å wrappe induviduelle komponenter i en higher-order component, vil vi få enklere kode mtp. at en funksjon håndterer endringer i skjemaet på kun en komponent, i motsetning til å ha en funksjon som håndterer alle endringer i skjemaet.
Dette vil også gi tredjeparts-utviklere en enklere måte å skrive egne funksjoner for håndtering av endringer i deres komponenter.</p>

<h3 id="eksempel-på-bruk-i-altinn-studio">Eksempel på bruk i Altinn Studio</h3>

<p>Når bruker lager en tjeneste med 3. parts komponenter vil vi wrappe disse komponentene i en
Higher Order Component som gir den en callback funksjon som tar imot data som komponenten har,
og kjøre en redux-action som oppdaterer data i redux-state. Uten at utvikleren av 3. parts komponenten må sette seg inn i hvilke actions som skal kjøres.
Dette gir også bedre mulighet for å gjennbruke 3. parts komponenter.</p>

<h3 id="eksempel-på-higher-order-component">Eksempel på Higher Order Component</h3>

<pre><code class="language-javascript">const FormComponentWrapper = (WrappedComponent, ...) =&gt; {
    // Feel free to do anything that will enhance the components properties

    // Return a react component
    return class extends React.Component {
        // Add functions for handling changing of data
        handleDataChange = (dataModelBinding, data) =&gt; {
            // fire off an action for adding the changed data to redux state
        }

        render() {
            return(
                &lt;WrappedComponent onFormDataChange={this.handleDataChange} {...props}/&gt;
            );
        }
    }
}
</code></pre>

<h3 id="kilder-2">Kilder</h3>

<ul>
<li><a href="https://reactjs.org/docs/higher-order-components.html">Higher-Order component</a></li>
</ul>

<h1 id="normalized-redux-store">Normalized Redux Store</h1>

<h2 id="kort-oppsummert-tl-dr-2">Kort oppsummert (TL;DR)</h2>

<ul>
<li>Hver datatype får sin egen &ldquo;tabell&rdquo; i State.</li>
<li>Hver &ldquo;tabell&rdquo; skal lagre individuelle &ldquo;data&rdquo; som objekter, med IDer som nøkler og &ldquo;dataen&rdquo; som verdi.</li>
<li>Referansene til de individuelle &ldquo;dataene&rdquo; lagres ved å lagre IDene.</li>
<li>Array med IDene brukes for å indikere sortering.</li>
</ul>

<h2 id="utfordring-why-2">Utfordring (Why?)</h2>

<ul>
<li>Kompliserte reducers for å oppdatere nøstet state struktur.</li>
<li>Unødvendig re-rendering grunnet oppdatering av nøstede objekter.</li>
</ul>

<h2 id="eksempel-1">Eksempel</h2>

<pre><code class="language-javascript">{
    posts : {
        byId : {
            &quot;post1&quot; : {
                id : &quot;post1&quot;,
                author : &quot;user1&quot;,
                body : &quot;......&quot;,
                comments : [&quot;comment1&quot;, &quot;comment2&quot;]    
            },
            &quot;post2&quot; : {
                id : &quot;post2&quot;,
                author : &quot;user2&quot;,
                body : &quot;......&quot;,
                comments : [&quot;comment3&quot;, &quot;comment4&quot;, &quot;comment5&quot;]    
            }
        },
        allIds : [&quot;post1&quot;, &quot;post2&quot;]
    },
    comments : {
        byId : {
            &quot;comment1&quot; : {
                id : &quot;comment1&quot;,
                author : &quot;user2&quot;,
                comment : &quot;.....&quot;,
            },
            &quot;comment2&quot; : {
                id : &quot;comment2&quot;,
                author : &quot;user3&quot;,
                comment : &quot;.....&quot;,
            },
            &quot;comment3&quot; : {
                id : &quot;comment3&quot;,
                author : &quot;user3&quot;,
                comment : &quot;.....&quot;,
            },
            &quot;comment4&quot; : {
                id : &quot;comment4&quot;,
                author : &quot;user1&quot;,
                comment : &quot;.....&quot;,
            },
            &quot;comment5&quot; : {
                id : &quot;comment5&quot;,
                author : &quot;user3&quot;,
                comment : &quot;.....&quot;,
            },
        },
        allIds : [&quot;comment1&quot;, &quot;comment2&quot;, &quot;comment3&quot;, &quot;commment4&quot;, &quot;comment5&quot;]
    },
    users : {
        byId : {
            &quot;user1&quot; : {
                username : &quot;user1&quot;,
                name : &quot;User 1&quot;,
            },
            &quot;user2&quot; : {
                username : &quot;user2&quot;,
                name : &quot;User 2&quot;,
            },
            &quot;user3&quot; : {
                username : &quot;user3&quot;,
                name : &quot;User 3&quot;,
            }
        },
        allIds : [&quot;user1&quot;, &quot;user2&quot;, &quot;user3&quot;]
    }
}
</code></pre>

<h3 id="kilder-3">Kilder</h3>

<ul>
<li><a href="https://redux.js.org/recipes/structuringreducers/normalizingstateshape">Normalizing State Shape</a></li>
</ul>


<footer class=" footline" >
	
</footer>





      </div>
    </div>

    
 
    

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


        
            <a class="nav nav-prev" href="/technology/react/" title="React"> <i class="fa fa-chevron-left"></i></a>
        
        
            <a class="nav nav-next" href="/technology/redux/" title="Redux" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
        
    </div>

    </section>
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js"></script>
    <script src="/js/featherlight.min.js"></script>
    <script src="/js/html5shiv-printshiv.min.js"></script>
    <script src="/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom.71422.js"></script>
    <script src="/js/learn.js"></script>
    <script src="/js/hugo-learn.js"></script>

    
    <link href="/mermaid/mermaid.css" type="text/css" rel="stylesheet"/>
    <script src="/mermaid/mermaid.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    

    

  </body>
</html>
