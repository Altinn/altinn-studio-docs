<!DOCTYPE html>
<html lang="nb" class="js csstransforms3d">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Hvordan autentisere ved √• bruke APIene." />
<meta name="altinn_pagedir" class="elastic" content="api/scenarios/authentication/" />
<meta name="altinn_title" class="elastic" content="Autentisering" />

<meta name="diataxis" data-pagefind-filter="Type[content]" content="Referanse" />

<title>Autentisering ‚Äì Altinn</title><link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
    <link href="/css/nucleus.css" rel="stylesheet">
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <link href="/css/hybrid.css" rel="stylesheet">

    <link href="/css/fortawesome.css" rel="stylesheet">
    <link href="/css/designsystem.css" rel="stylesheet"><link href="/css/theme.css" rel="stylesheet"><script src="/js/jquery-2.x.min.js"></script>
<link href="/css/custom.css" rel="stylesheet">


<script async src="https://www.googletagmanager.com/gtag/js?id=UA-114303148-1"></script>
<script>
var host = window.location.hostname;
if(host != "localhost")
{
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-114303148-1', { 'anonymize_ip': true });
}
</script>

<script>
if (window.location.hostname != "localhost") {
    
    var script = document.createElement('script');
    script.async = true;
    script.src = 'https://siteimproveanalytics.com/js/siteanalyze_6255470.js';
    document.head.appendChild(script);
}
</script><style>
      :root #header + #content > #left > #rlblock_left {
        display:none !important;
      }
    </style>
  </head>
  <body class="a-page" data-url="/nb/api/scenarios/authentication/"><nav class="a-jumpnav">
  <ul class="no-decoration d-flex">
    <li><a class="sr-only sr-only-focusable" href="#content">Hopp til hovedinnholdet</a></li><li><a class="sr-only sr-only-focusable" href="#docsmenu">Hopp til hovedmeny</a></li></ul>
</nav>

<header class="a-header ">
  
  <div class="container">
    <div class="row">
      <div class="col-12">

        
        <nav class="a-globalNav " id="primary-nav">
          <a href="/nb/" class="a-globalNav-logo">
            <img src="/images/altinn-new-logo-white.svg" alt="Altinn logo" class="adocs-logo">
            <span class="sr-only">Til forsiden</span>
          </a>

          <button class="navbar-toggler d-md-none" type="button"><span class="sr-only">Vis/skjul meny</span></button>

          <div class="collapse navbar-toggleable-sm a-globalNav-main" id="exCollapsingNavbar2">
            <ul id="exCollapsingNavbar">
              <li class="nav-item dropdown d-md-block"><a class="nav-link dropdown-toggle a-languageSwitcher" aria-expanded="false" data-toggle="dropdown" aria-haspopup="true" href="#">
  <span>Produkt</span>
</a>
<div class="dropdown-menu a-dropdown-languages a-dropdownTriangle">
    <a aria-hidden="true" class="dropdown-item" href="/nb/altinn-studio/v8/">
      <p class="product-item">Altinn Studio</p>
    </a>
    <a aria-hidden="true" class="dropdown-item" href="/nb/authorization/">
      <p class="product-item">Autorisasjon</p>
    </a>
    <a aria-hidden="true" class="dropdown-item" href="/nb/dialogporten/">
      <p class="product-item">Dialogporten</p>
    </a>
    <a aria-hidden="true" class="dropdown-item" href="/nb/broker/">
      <p class="product-item">Formidling</p>
    </a>
    <a aria-hidden="true" class="dropdown-item" href="/nb/events/">
      <p class="product-item">Events</p>
    </a>
    <a aria-hidden="true" class="dropdown-item" href="/nb/correspondence/">
      <p class="product-item">Melding</p>
    </a>
    <a aria-hidden="true" class="dropdown-item" href="/nb/notifications/">
      <p class="product-item">Varsling</p>
    </a>
</div>
</li>
              <li>
                <a class="a-nav-link a-hvr-underline " href="/nb/api/">api</a>
              </li>
              <li>
                <a class="a-nav-link a-hvr-underline " href="/nb/community/">community</a>
              </li>
            </ul>
          </div>
        </nav> 

        <ul class="nav nav-pills a-header-options" id="nav-list">
           <li class="nav-item d-md-block">
              <button id="search-button" class="nav-link adocs-toggle-search" type="button"
                  data-toggle="collapse" data-target="#collapseSearchContent" aria-expanded="false" aria-controls="collapseSearchContent"
                  onclick="setTimeout(function(){document.getElementsByClassName('pagefind-ui__search-input')[0].focus()},100); return true;">
                  <span>
                      <i class="ai ai-search">
                        <span class="sr-only">S√∏k</span></i>
                  </span>
              </button>
          </li>
          <li class="nav-item dropdown d-md-block"><a class="nav-link dropdown-toggle a-languageSwitcher" aria-expanded="false" data-toggle="dropdown" aria-haspopup="true" href="#">
  <img src="/images/nb.svg" class="" alt="Language" style="height: 1.2em; vertical-align: bottom;"/>
</a>
<div class="dropdown-menu a-dropdown-languages a-dropdownTriangle" style="z-index:100000;"><a aria-hidden="true" class="dropdown-item" href="/nb/api/scenarios/authentication/">
      <img src="/images/nb.svg" class="a-iconLeft a-flag" alt="" />
      <p>
        <span class="a-h3">Bokm√•l ‚úì</span><br></p>
    </a><a aria-hidden="true" class="dropdown-item" href="/en/api/scenarios/authentication/">
      <img src="/images/en.svg" class="a-iconLeft a-flag" alt="" />
      <p>
        <span class="a-h3">English</span><br></p>
    </a></div>
</li>
        </ul>

      </div>
    </div> 
  </div> 
</header>

<div id="collapseSearchContent" class="a-collapseContent adocs-collapseSearch collapse">
  <div class="a-collapseContent-inside px-0">
    <div class="bg-white pt-3 pb-3"><div class="container">
    <div class="row">
         
        <div class="form-group a-form-group a-form-group-large col-sm-12">
            <label class="a-h2" for="search-by">Hva leter du etter?</label>
            <div id="search-by" style="margin: auto;" class=""></div>
        </div>
        <link href="/pagefind/pagefind-ui.css" rel="stylesheet" />
        <script src="/pagefind/pagefind-ui.js"></script>
        <script>
            window.addEventListener('DOMContentLoaded', (event) => {
                new PagefindUI({
                    element: "#search-by",
                    pageSize: 10,
                    excerptLength: 25,
                    showSubResults: true,
                    resetStyles: true,
                    showImages: true,
                    processResult: function (result) {
                        if (result?.meta?.image) {
                            let resultBase = new URL(result.url, window.location);
                            let remappedImage = new URL(result.meta.image, resultBase);
                            if (remappedImage.hostname !== window.location.hostname) {
                                result.meta.image = remappedImage.toString();
                            } else {
                                result.meta.image = remappedImage.pathname;
                            }
                        }
                    }
                });
                
                var searchField = document.getElementsByClassName("pagefind-ui__search-input")[0];
                if (searchField) {
                    searchField.setAttribute('aria-label', 'S√∏k');
                }

                var sKey = "as";
                searchField.addEventListener("blur", () => {
                    sessionStorage.setItem(sKey, searchField.value);
                });

                var searchButton = document.getElementById("search-button");
                searchButton.addEventListener("click", () => {
                    var scrollContainer = document.getElementsByClassName('adocs-scrollcontainer')[0];
                    if (!searchField.checkVisibility()) {
                        scrollContainer.setAttribute('style', 'visibility: hidden !important');
                    } else {
                        scrollContainer.removeAttribute('style');
                    }
                }); 
                
                if (sessionStorage.getItem(sKey)) {
                    searchField.value = sessionStorage.getItem(sKey);
                    searchField.dispatchEvent(new Event("input"));
                }
            });
        </script>
        <style>
          :root {
            --pagefind-ui-scale: 0.9;
            --pagefind-ui-text: #000000;
            --pagefind-ui-border: #1EAEF7;
            --pagefind-ui-border-radius: 0;
          }
          .pagefind-ui__search-input::placeholder {
            color: #757575 !important;
            opacity: 1 !important;
            font-weight: normal !important;
          }
          .pagefind-ui__result-link:hover, .pagefind-ui__result-link:hover {
            text-decoration: none !important;
          }
          .pagefind-ui__form:before {
            opacity: 1 !important;
          }
        </style>
        
    </div>
</div></div>
  </div>
</div>
<div class="container pt-2 pt-md-3 pt-lg-5">      
      <div class="adocs-scrollcontainer">
        <div class="row">
          <div class="col-sm-12 col-md-10 last-modified">Sist endret: 12. jan. 2026</div>
        </div>
        <div class="row">
          <div class="col-sm-12 col-md-10"><nav id="sidebar" class=""><div class="highlightable">
  <ul id="docsmenu" class="topics">
      <li class="dd-item">
        <a href="/nb/api/"><span>API</span><i class="fa fa-sort-down fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/api/accessmanagement/"><span>Access Management</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/api/accessmanagement/appsopenapi/"><span>Altinn Apps API</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/accessmanagement/consententerprise/"><span>Consent Enterprise API</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/accessmanagement/resourceowneropenapi/"><span>Resourceowner API</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/api/apps/"><span>App</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/api/apps/metadata/"><span>Metadata</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/apps/instances/"><span>Instanser</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/apps/data-elements/"><span>Data-elementer</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/api/apps/data-elements/user-defined-metadata/"><span>Brukerdefinerte metadata</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/apps/data-elements/metadata/"><span>Metadata</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/apps/data-elements/tags/"><span>Tags</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/api/apps/stateless-data-elements/"><span>Tilstandsl√∏se data</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/apps/process/"><span>Prosess</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/apps/validation/"><span>Validering</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/apps/spec/"><span>OpenAPI</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/api/authentication/"><span>Authentication</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/api/authentication/systemuserapi/"><span>Systembruker API</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/api/authentication/systemuserapi/clientdelegation/"><span>Klient delegering</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/authentication/systemuserapi/systemuser/"><span>Systembruker</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/api/authentication/systemuserapi/systemuser/external/"><span>Systembruker API</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/api/authentication/systemuserapi/systemuser/external/model/"><span>Modell</span></a></li></ul></li></ul></li>
      <li class="dd-item">
        <a href="/nb/api/authentication/systemuserapi/systemuserrequest/"><span>Systembruker foresp√∏rselen</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/api/authentication/systemuserapi/systemuserrequest/external/"><span>Eksterne API</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/api/authentication/systemuserapi/systemuserrequest/external/model/"><span>Modell</span></a></li></ul></li></ul></li>
      <li class="dd-item">
        <a href="/nb/api/authentication/systemuserapi/systemregister/"><span>Systemregister</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/api/authentication/systemuserapi/systemregister/model/"><span>Modell</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/authentication/systemuserapi/systemregister/create/"><span>Opprett system</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/authentication/systemuserapi/systemregister/get/"><span>Hent system</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/authentication/systemuserapi/systemregister/update/"><span>Oppdater system</span></a></li></ul></li></ul></li>
      <li class="dd-item">
        <a href="/nb/api/authentication/delegate-scopes/"><span>Delegere API-tilganger</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/authentication/digdirscopes/"><span>DigDir Scopes</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/authentication/spec/"><span>OpenAPI</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/api/authorization/"><span>Authorization</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/api/authorization/spec/"><span>OpenAPI</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/api/dialogporten/"><span>Dialogporten</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/broker/"><span>Formidling</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/api/broker/spec/"><span>OpenAPI</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/api/guides/"><span>Guider</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/api/guides/endusersystems/"><span>Sluttbrukersystemer</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/api/guides/endusersystems/submitdata/"><span>Sende inn data fra</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/api/guides/appownerintegration/"><span>Tjenesteeiere</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/api/guides/appownerintegration/receivingdata/"><span>Motta data</span></a></li></ul></li></ul></li>
      <li class="dd-item">
        <a href="/nb/api/correspondence/"><span>Melding</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/api/correspondence/spec/"><span>OpenAPI</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/api/models/"><span>Modeller</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/api/models/app-metadata/"><span>App metadata</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/models/instance/"><span>Instance</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/models/data-element/"><span>DataElement</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/api/profile/"><span>Profil</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/api/profile/about-profile/"><span>Om Profil</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/profile/reference/"><span>Referanse</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/api/profile/reference/favorites/"><span>Favoritter</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/profile/reference/organization-notification-addresses/"><span>Virksomheters varslingsadresser</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/profile/reference/personal-notification-addresses/"><span>Din kontaktinformasjon for virksomheten</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/profile/reference/users/"><span>Brukere</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/profile/reference/spec/"><span>API spesifikasjon</span></a></li></ul></li></ul></li>
      <li class="dd-item">
        <a href="/nb/api/resourceregistry/"><span>Resource Registry</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/api/resourceregistry/resource/"><span>Resource</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/resourceregistry/spec/"><span>OpenAPI</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/api/scenarios/"><span>Scenarier</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/api/scenarios/authentication/"><span>Autentisering</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/api/storage/"><span>Storage</span><i class="fa fa-caret-right fa-lg category-icon"></i></a><ul>
      <li class="dd-item">
        <a href="/nb/api/storage/instances/"><span>Instanser</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/storage/data/"><span>Data</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/storage/instance-events/"><span>Instance events</span></a></li>
      <li class="dd-item">
        <a href="/nb/api/storage/spec/"><span>OpenAPI</span></a></li></ul></li>
      <li class="dd-item">
        <a href="/nb/api/studio/"><span>Studio</span></a></li></ul></li></ul>
</div>
</nav>

<script>
          $("li.dd-item a[href='/nb/api/']").parent().addClass("parent");
 $("li.dd-item a[href='/nb/api/scenarios/']").parent().addClass("parent");
 $("li.dd-item a[href='/nb/api/scenarios/authentication/']").parent().addClass("active");
        </script>
        <section id="body">
          <div id="content" class="adocs-content js-moveChildrenTo">
        <div id="overlay"></div>
        <div class="a-text"><div id="top-bar">            
            <div id="breadcrumbs">
                <span id="sidebar-toggle-span" class="adocs-sidebarToggle">
                  <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                    <i class="fa fa-bars"></i>
                    <span class="sr-only">Vis/skjul meny</span>
                  </a>
                </span>
                <span class="links" data-pagefind-meta="üçû"><a href='/nb/api/'>API</a> <span class='adocs-breadcrumb-divider'> / </span> <a href='/nb/api/scenarios/'>Scenarier</a> <span class='adocs-breadcrumb-divider'> / </span> Autentisering</span>
            </div>            
          </div><div id="body-inner" data-pagefind-body><h1 class="a-fontBold">Autentisering</h1>
              <p class="a-leadText" id="leadText">Hvordan autentisere ved √• bruke APIene.</p>

<h2 id="authentication-for-application-owners">Authentication for application owners</h2>
<p>Application owners should be authenticated with <a href="https://www.digdir.no/felleslosninger/maskinporten/869">Maskinporten</a>.</p>
<h3 id="api-provisioning-in-maskinporten">API provisioning in Maskinporten</h3>
<h4 id="api-provider">API-provider</h4>
<p>To provide an API in Maskinporten Altinn has to do two operations.</p>
<ol>
<li>As API-provider Altinn registres a scope in <em>Maskinporten</em>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>POST /scopes
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;prefix&#34;</span>: <span style="color:#f1fa8c">&#34;altinn&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;subscope&#34;</span>: <span style="color:#f1fa8c">&#34;instances/metadata.read&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;description&#34;</span>: <span style="color:#f1fa8c">&#34;Clients can access metadata for all instances for all apps of the organisation&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
<li>As API-provider Altinn has to give access to its scope for a given organisation
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-http" data-lang="http"><span style="display:flex;"><span>PUT /scopes/access/889640782?scope=altinn:apps.read
</span></span></code></pre></div>Here we have given organisation 889640782 access to the scope <code>altinn:instances/metadata.read</code>.
The organisation must then create a client that uses the scope.</li>
</ol>
<h4 id="api-consumer">API-consumer</h4>
<p>To access the Altinn API an organisation must create a client.</p>
<ol>
<li>As API-consumer the organisation must create a client in <em>Maskinporten</em> with scopes provided by Altinn:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>POST /clients
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;client_name&#34;</span>: <span style="color:#f1fa8c">&#34;altinnOrgRead&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;client_type&#34;</span>: <span style="color:#f1fa8c">&#34;CONFIDENTIAL&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;description&#34;</span>: <span style="color:#f1fa8c">&#34;Client for accessing the my orgs app data&#34;</span>,
</span></span><span style="display:flex; background-color:#3d3f4a"><span>    <span style="color:#ff79c6">&#34;scopes&#34;</span>: [ <span style="color:#f1fa8c">&#34;altinn:instances/metadata.read&#34;</span> ],
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;token_reference&#34;</span>: <span style="color:#f1fa8c">&#34;SELF_CONTAINED&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div></li>
</ol>
<h3 id="scopes">Scopes</h3>
<p>scope names must follow the following regexp:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-perl" data-lang="perl"><span style="display:flex;"><span><span style="color:#ff79c6">^</span>([a<span style="color:#ff79c6">-</span>z0<span style="color:#ff79c6">-</span><span style="color:#bd93f9">9</span>]<span style="color:#ff79c6">+\/</span>?)<span style="color:#ff79c6">+</span>[a<span style="color:#ff79c6">-</span>z0<span style="color:#ff79c6">-</span><span style="color:#bd93f9">9</span>]<span style="color:#ff79c6">+</span>(<span style="color:#ff79c6">\.</span>[a<span style="color:#ff79c6">-</span>z0<span style="color:#ff79c6">-</span><span style="color:#bd93f9">9</span>]<span style="color:#ff79c6">+</span>)?<span style="color:#8be9fd;font-style:italic">$?</span>
</span></span></code></pre></div><p>It means that we cannot have <code>-</code> or <code>_</code> in scope names.</p>
<h4 id="all-instances-scope">All instances scope</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span>altinn<span style="color:#ff79c6">:</span>serviceowner<span style="color:#ff79c6">/</span>instances.read
</span></span><span style="display:flex;"><span>altinn<span style="color:#ff79c6">:</span>serviceowner<span style="color:#ff79c6">/</span>instances.write
</span></span></code></pre></div><p>This is the most general scope which can be given to an organisation by Altinn.
It means that the application owner can create a client that can access all instances of apps issued by that application owner.</p>
<p>Clients with <em>write</em> scope will be able to instantiate applications through direct access to the app&rsquo;s api, update metadata,
update process state, upload data, validate data, and change process of an instance.</p>
<p>Clients with <em>read</em> token will only be allowed to read metadata, data and events information.</p>
<h3 id="exchange-of-jwt-token">Exchange of JWT token</h3>
<p>Application owners register clients in Maskinporten and selects the scope they need.</p>
<p>A client is authenticated by <em>Maskinporten</em> and are given a <em>Maskinporten JWT access token</em>.</p>
<p>This token has to be validated and replaced with an <em>Altinn JWT access token</em> which should be used to access the apis.</p>
<h4 id="maskinporten-jwt-access-token-input">Maskinporten JWT access token (input)</h4>
<p>Client provides a self-contained access-token.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-http" data-lang="http"><span style="display:flex;"><span>Autorization: Bearer eyJraWQiOiJIdFlaMU1UbFZXUGNCV0JQVWV3TmxZd1RCRklicU1Hb081OFJ4bmN6TWJNIiwiYWxnIjoiUlMyNTYifQ.eyJhdWQiOiJ0ZXN0X3JwIiwic2NvcGUiOiJ ...
</span></span><span style="display:flex;"><span>GET /authentication/api/v1/exchange/maskinporten
</span></span></code></pre></div><p>The token looks something like this (after base64-decoding):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;kid&#34;</span>: <span style="color:#f1fa8c">&#34;HtYZ1MTlVWPcBWBPUewNlYwTBFIbqMGoO58RxnczMbM&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;alg&#34;</span>: <span style="color:#f1fa8c">&#34;RS256&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>.
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;aud&#34;</span>: <span style="color:#f1fa8c">&#34;https://tt02.altinn.no/maskinporten-api/&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;scope&#34;</span>: <span style="color:#f1fa8c">&#34;altinn:instances.write&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;iss&#34;</span>: <span style="color:#f1fa8c">&#34;https://oidc-ver2.difi.no/idporten-oidc-provider/&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;client_amr&#34;</span>: <span style="color:#f1fa8c">&#34;virksomhetssertifikat&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;token_type&#34;</span>: <span style="color:#f1fa8c">&#34;Bearer&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;exp&#34;</span>: <span style="color:#bd93f9">1571935870</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;iat&#34;</span>: <span style="color:#bd93f9">1571923870</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;client_id&#34;</span>: <span style="color:#f1fa8c">&#34;0de19f7a-f5fa-45d1-874c-3d2e88ce97d9&#34;</span>,
</span></span><span style="display:flex; background-color:#3d3f4a"><span>  <span style="color:#ff79c6">&#34;client_orgno&#34;</span>: <span style="color:#f1fa8c">&#34;974760673&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;jti&#34;</span>: <span style="color:#f1fa8c">&#34;U3HMLIY8b_X454CADQzfttSuWpCADPQhc57iZXVF_Ac&#34;</span>,
</span></span><span style="display:flex; background-color:#3d3f4a"><span>  <span style="color:#ff79c6">&#34;consumer&#34;</span>: {
</span></span><span style="display:flex; background-color:#3d3f4a"><span>    <span style="color:#ff79c6">&#34;authority&#34;</span>: <span style="color:#f1fa8c">&#34;iso6523-actorid-upis&#34;</span>,
</span></span><span style="display:flex; background-color:#3d3f4a"><span>    <span style="color:#ff79c6">&#34;ID&#34;</span>: <span style="color:#f1fa8c">&#34;0192:974760673&#34;</span>
</span></span><span style="display:flex; background-color:#3d3f4a"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>.
</span></span><span style="display:flex;"><span>&lt;&lt;signature&gt;&gt;
</span></span></code></pre></div><p>Maksinporten provides the legal <code>consumer</code> (the client) in ISO 6523 format. The <code>client_orgno</code> claim is deprecated.</p>
<h4 id="the-altinn-jwt-access-token-output">The Altinn JWT Access token (output)</h4>
<p>The convert operation validates the incoming token and generates a new JWT token with the same scope as the token.
The scopes is copied. The <code>orgNumber</code> and <code>org</code> is added by the token converter.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;scope&#34;</span>: <span style="color:#f1fa8c">&#34;altinn:instances.read altinn:instances.write&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;token_type&#34;</span>: <span style="color:#f1fa8c">&#34;Bearer&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;exp&#34;</span>: <span style="color:#bd93f9">1571996946</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;iat&#34;</span>: <span style="color:#bd93f9">1571995146</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;client_id&#34;</span>: <span style="color:#f1fa8c">&#34;0de19f7a-f5fa-45d1-874c-3d2e88ce97d9&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;client_orgno&#34;</span>: <span style="color:#f1fa8c">&#34;974760673&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;jti&#34;</span>: <span style="color:#f1fa8c">&#34;BcNIAuZKXdjpECmmwalAm-pcBp0iNc56T6eXhlxNBZE&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;consumer&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;authority&#34;</span>: <span style="color:#f1fa8c">&#34;iso6523-actorid-upis&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;ID&#34;</span>: <span style="color:#f1fa8c">&#34;0192:974760673&#34;</span>
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex; background-color:#3d3f4a"><span>  <span style="color:#ff79c6">&#34;org&#34;</span>: <span style="color:#f1fa8c">&#34;brg&#34;</span>,
</span></span><span style="display:flex; background-color:#3d3f4a"><span>  <span style="color:#ff79c6">&#34;orgNumber&#34;</span>: <span style="color:#bd93f9">974760673</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;iss&#34;</span>: <span style="color:#f1fa8c">&#34;https://platform.altinn.cloud/&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;AuthenticateMethod&#34;</span>: <span style="color:#f1fa8c">&#34;maskinporten&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;AuthenticationLevel&#34;</span>: <span style="color:#bd93f9">3</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;nbf&#34;</span>: <span style="color:#bd93f9">1571995146</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>.
</span></span><span style="display:flex;"><span>&lt;&lt;signature&gt;&gt;
</span></span></code></pre></div><h2 id="authentication-for-end-user-system">Authentication for end user system</h2>
<p>End user systems should be authentication with <a href="https://difi.github.io/felleslosninger/idporten_overordnet.html">ID-porten</a>.
When authenticated the system may exchange an access token provided by ID-porten with an Altinn token by instructions below.</p>
<h3 id="exchange-of-jwt-token-1">Exchange of JWT token</h3>
<p>This token has to be validated and replaced with an <em>Altinn JWT access token</em> which should be used to access the apis.</p>
<p><strong>IT IS IMPORTANT THAT THE USER HAS PROFILE IN ALTINN. Profile is automatic created when login in to the portal.</strong></p>
<h4 id="id-porten-jwt-access-token-input">ID-porten JWT access token (input)</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-http" data-lang="http"><span style="display:flex;"><span>Autorization: Bearer eyJraWQiOiJjWmswME1rbTVIQzRnN3Z0NmNwUDVGSFpMS0pzdzhmQkFJdUZiUzRSVEQ0IiwiYWxnIjoiUlMyNTYifQ.eyJhdF9 ...
</span></span><span style="display:flex;"><span>GET /authentication/api/v1/exchange/id-porten
</span></span></code></pre></div><p>The token looks something like this (after decoding):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;kid&#34;</span>: <span style="color:#f1fa8c">&#34;cZk00Mkm5HC4g7vt6cpP5FHZLKJsw8fBAIuFbS4RTD4&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;alg&#34;</span>: <span style="color:#f1fa8c">&#34;RS256&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>.
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;at_hash&#34;</span>: <span style="color:#f1fa8c">&#34;IF-jpSLtMjzoHdEhLq9pnw&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;sub&#34;</span>: <span style="color:#f1fa8c">&#34;PZcxQYOR_ylbrlj69pXn_HdTmrpDRpA3X0rTyOEyN5I=&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;amr&#34;</span>: [
</span></span><span style="display:flex;"><span>    <span style="color:#f1fa8c">&#34;Minid-PIN&#34;</span>
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;iss&#34;</span>: <span style="color:#f1fa8c">&#34;https://oidc-ver2.difi.no/idporten-oidc-provider/&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;pid&#34;</span>: <span style="color:#f1fa8c">&#34;191080XXXXX&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;locale&#34;</span>: <span style="color:#f1fa8c">&#34;nb&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;nonce&#34;</span>: <span style="color:#f1fa8c">&#34;1584978003167642&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;sid&#34;</span>: <span style="color:#f1fa8c">&#34;bQDBkJmjrX3bx2agu4q7BS5QW6TPf9CHnJX11vEthZg&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;aud&#34;</span>: <span style="color:#f1fa8c">&#34;38e634d9-5682-44ae-9b60-db636efe3156&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;acr&#34;</span>: <span style="color:#f1fa8c">&#34;Level3&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;auth_time&#34;</span>: <span style="color:#bd93f9">1584978021</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;exp&#34;</span>: <span style="color:#bd93f9">1584978141</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;iat&#34;</span>: <span style="color:#bd93f9">1584978021</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;jti&#34;</span>: <span style="color:#f1fa8c">&#34;_Og8JT1zMKzzHFB4WoVCdvqzmEpoY1hPhLa47bieJ94&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>.
</span></span><span style="display:flex;"><span>&lt;&lt;signature&gt;&gt;
</span></span></code></pre></div><h4 id="the-altinn-jwt-access-token-output-1">The Altinn JWT Access token (output)</h4>
<p>The exchange operation validates the incomming token and generates a new JWT token that contains user data
retrieved from the database using the provided pid (person identification number) and pre-existing data from the ID-porten token.</p>
<p><code>pid</code> is referred to as ssn (social security number) i Altinn Platform.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;nameid&#34;</span>: <span style="color:#f1fa8c">&#34;20000011&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;urn:altinn:userid&#34;</span>: <span style="color:#f1fa8c">&#34;20000011&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;urn:altinn:username&#34;</span>: <span style="color:#f1fa8c">&#34;&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;urn:altinn:partyid&#34;</span>: <span style="color:#bd93f9">50002119</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;urn:altinn:authenticatemethod&#34;</span>: <span style="color:#f1fa8c">&#34;Minid-PIN&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;urn:altinn:authlevel&#34;</span>: <span style="color:#bd93f9">3</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;amr&#34;</span>: <span style="color:#f1fa8c">&#34;Minid-PIN&#34;</span>,
</span></span><span style="display:flex; background-color:#3d3f4a"><span>  <span style="color:#ff79c6">&#34;pid&#34;</span>: <span style="color:#f1fa8c">&#34;191080XXXXX&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;locale&#34;</span>: <span style="color:#f1fa8c">&#34;nb&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;nonce&#34;</span>: <span style="color:#f1fa8c">&#34;1585045781364132&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;sid&#34;</span>: <span style="color:#f1fa8c">&#34;BYSqEpVGRrh6rElmnzzTjcU0roC95rxNCC2kAsB2hmY&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;acr&#34;</span>: <span style="color:#f1fa8c">&#34;Level3&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;auth_time&#34;</span>: <span style="color:#bd93f9">1585045793</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;exp&#34;</span>: <span style="color:#bd93f9">1585047785</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;iat&#34;</span>: <span style="color:#bd93f9">1585045985</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#ff79c6">&#34;nbf&#34;</span>: <span style="color:#bd93f9">1585045985</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>.
</span></span><span style="display:flex;"><span>&lt;&lt;signature&gt;&gt;
</span></span></code></pre></div><h2 id="open-id-connect-configuration">Open ID Connect configuration</h2>
<div class="notices warning" >This is work-in-progress. The response is still missing required information and might be inconsistent with actual authentication mechanisms.</div>
<p>Metadata about Altinn as an Open ID provider is exposed as a .well-known endpoint as defined
by <a href="https://openid.net/specs/openid-connect-discovery-1_0.html#ProviderConfig">OpenID Connect Discovery</a>.</p>
<p>The primary porpose of this endpoint is to make available the Altinn signing certificate for the JSON Web Tokens being generated.
It is recommended that clients of Altinn use this discovery endpoint to automatically have their systems updated when Altinn changes their signing certificate.</p>
<table>
  <thead>
      <tr>
          <th>Environment</th>
          <th>URL</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>AT2x</td>
          <td><a href="https://platform.at2x.altinn.cloud/authentication/api/v1/openid/.well-known/openid-configuration">https://platform.at2x.altinn.cloud/authentication/api/v1/openid/.well-known/openid-configuration</a></td>
      </tr>
      <tr>
          <td>YT01</td>
          <td><a href="https://platform.yt01.altinn.cloud/authentication/api/v1/openid/.well-known/openid-configuration">https://platform.yt01.altinn.cloud/authentication/api/v1/openid/.well-known/openid-configuration</a></td>
      </tr>
      <tr>
          <td>TT02</td>
          <td><a href="https://platform.tt02.altinn.no/authentication/api/v1/openid/.well-known/openid-configuration">https://platform.tt02.altinn.no/authentication/api/v1/openid/.well-known/openid-configuration</a></td>
      </tr>
  </tbody>
</table>


<footer class=" footline" ></footer>
                </div>
              </div>
              
              
            </div><div id="top-github-link">
                  <a class="" href="https://github.com/altinn/altinn-studio-docs/blob/master/content/api/scenarios/authentication/_index.nb.md" target="blank">
                    <i class="fa fa-code-fork"></i>
                    Endre denne siden i GitHub
                  </a>
                </div></section>
        </div> 
        <div class="col-md-2 d-none d-md-block">
          <div class="toc-container">
            <nav id="TableOfContents">
  <ul>
    <li><a href="#authentication-for-application-owners">Authentication for application owners</a>
      <ul>
        <li><a href="#api-provisioning-in-maskinporten">API provisioning in Maskinporten</a>
          <ul>
            <li><a href="#api-provider">API-provider</a></li>
            <li><a href="#api-consumer">API-consumer</a></li>
          </ul>
        </li>
        <li><a href="#scopes">Scopes</a>
          <ul>
            <li><a href="#all-instances-scope">All instances scope</a></li>
          </ul>
        </li>
        <li><a href="#exchange-of-jwt-token">Exchange of JWT token</a>
          <ul>
            <li><a href="#maskinporten-jwt-access-token-input">Maskinporten JWT access token (input)</a></li>
            <li><a href="#the-altinn-jwt-access-token-output">The Altinn JWT Access token (output)</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#authentication-for-end-user-system">Authentication for end user system</a>
      <ul>
        <li><a href="#exchange-of-jwt-token-1">Exchange of JWT token</a>
          <ul>
            <li><a href="#id-porten-jwt-access-token-input">ID-porten JWT access token (input)</a></li>
            <li><a href="#the-altinn-jwt-access-token-output-1">The Altinn JWT Access token (output)</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#open-id-connect-configuration">Open ID Connect configuration</a></li>
  </ul>
</nav></div>
        </div>
      </div> 
    </div>
    </div> <footer class="adocs-footer">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <ul>
                    <li>
                        <a href="https://www.altinn.no/om-altinn/">Om Altinn</a>
                    </li>
                    <li>
                        <a href="https://github.com/Altinn/altinn-studio/issues">Backlog</a>
                    </li>
                    <li>
                        <a href="https://digdir-samarbeid.slack.com">Slack</a>
                    </li>
                    <li>
                        <a href="https://github.com/Altinn">GitHub</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js"></script>
    <script src="/js/html5shiv-printshiv.min.js"></script>
    <script src="/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom.71422.js"></script>
    <script src="/js/altinninfoportal.js"></script>
    <script src="/js/altinndocs.js"></script>
    <script src="/js/altinndocs-learn.js"></script>
    <script src="/js/stickysidebar/rAF.js"></script>
    <script src="/js/stickysidebar/ResizeSensor.js"></script>
    <script src="/js/stickysidebar/sticky-sidebar.js"></script>

    <style>
      #TableOfContents {overflow-x: visible; overflow-y: scroll; scrollbar-width: none; -ms-overflow-style: none;}
      #TableOfContents::-webkit-scrollbar {display: none;  }
      #TableOfContents > ul > li {margin-top: 0.8em !important; list-style-type:none; list-style-position:inside;}
      #TableOfContents li li {margin-left: 0.4em; list-style-type:circle;}
      #TableOfContents li li:has(a.text-active) {list-style-type:disc;}
      #TableOfContents a {border-bottom: 2px solid transparent;}
      #TableOfContents a.text-active, #TableOfContents a:hover {border-bottom: 2px solid #1EAEF7;}
    </style>
    <script>
      
      class Scroller {
        static init() {
          if(document.querySelector('#TableOfContents')) {
            this.tocLinks = document.querySelectorAll('#TableOfContents a');
            this.headers = Array.from(this.tocLinks).map(link => {
              var s = link.href.split('#')[1];
              s = s.replace(/%C3%A6/g, "√¶");
              s = s.replace(/%C3%B8/g, "√∏");
              s = s.replace(/%C3%A5/g, "√•");

              return document.getElementById(s);
            })
            this.ticking = false;
            window.addEventListener('scroll', (e) => {
              this.onScroll()
            })
          }
        }

        static onScroll() {
          if(!this.ticking) {
            requestAnimationFrame(this.update.bind(this));
            this.ticking = true;
          }
        }

        static update() {
          this.activeHeader ||= this.headers[0];
          let activeIndex = this.headers.findIndex((header) => {
            if (header != null) {
              return header.getBoundingClientRect().top > 180;
            }
          });
          if(activeIndex == -1) {
            activeIndex = this.headers.length - 1;
          } else if(activeIndex > 0) {
            activeIndex--;
          }
          let active = this.headers[activeIndex];
          if(active !== this.activeHeader) {
            this.activeHeader = active;
            this.tocLinks.forEach(link => link.classList.remove('text-active'));
            this.tocLinks[activeIndex].classList.add('text-active');
          }
          this.ticking = false;
        }
      }

      var a = new StickySidebar('#sidebar', {
        topSpacing: 20,
        bottomSpacing: 60,
        containerSelector: '.adocs-scrollcontainer',
        innerWrapperSelector: '.sidebar__inner',
        minWidth: 768
      });
      if (document.getElementById("TableOfContents")) {
        var a = new StickySidebar('.toc-container', {
          topSpacing: 20,
          bottomSpacing: 60,
          containerSelector: '.adocs-scrollcontainer',
          innerWrapperSelector: '#TableOfContents',
          minWidth: 768
        });
      }
    </script>
    <link href="/mermaid/mermaid.css" type="text/css" rel="stylesheet"/>
    <script src="/mermaid/mermaid.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function(e) { Scroller.init();});
      mermaid.initialize({startOnLoad:true});
    </script>
<script src="/js/custom.js"></script></body>
</html>

